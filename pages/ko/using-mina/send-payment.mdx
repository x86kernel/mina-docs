import Page from "@reason/pages/Docs";
import DocLink from "@reason/components/DocLink";
export default Page({ title: "Send a Payment" });

# 미나를 이용해서 지불해보기

이 섹션에서는 미나 클라이언트를 이용해서 트랜잭션을 보내는 방법과 블록체인과 상호작용 하는 방법에 대한 간략한 개요를 제공합니다.

## 오프라인에서 서명된 트랜잭션 사용하기

트랜잭션을 보내고 싶지만 노드를 직접 실행하지 않는 경우, 노드를 실행하고 있는 다른사람에게 위임하면 됩니다. 실행중인 노드를 통해 트랜잭션을 보내고 싶으시면, [연결된 노드 사용하기](#using-a-connected-node)로 넘어가시면 됩니다.

### 렛저(Ledger) 장치 사용

개인키가 렛저 장치에 있는 경우 서명된 트랜잭션을 오프라인으로 생성하려면 <DocLink copy="렛저 오프라인 모드" url="/advanced/ledger-app-mina#offline-mode" />를 참조하시기 바랍니다.

### generate-keypair 툴로 생성된 키 쌍 사용

더 나은 툴이 출시될 예정입니다. https://github.com/MinaProtocol/mina/issues/8928 를 참조하시기 바랍니다. 일단 지금은 해당 이슈 답변에 달려있는 해결 방법을 이용하시기 바랍니다.

### client-sdk 로 생성된 키 쌍 사용

client-sdk 를 사용하여 서명된 트랜잭션을 생성하려면 [client-sdk readme page](https://github.com/MinaProtocol/mina/tree/develop/frontend/client_sdk) 를 참고하시기 바랍니다.

### 트랜잭션 보내기

호스팅 되고있는 서비스를 사용하여 서명된 트랜잭션을 날릴 수 있습니다. 서명된 트랜잭션을 날릴때 _개인키가 노출되지 않습니다_.

client-sdk 로 서명된 트랜잭션은 [https://minaexplorer.com/broadcast-tx](https://minaexplorer.com/broadcast-tx) 를 사용하시면 됩니다.

렛저 장치로 서명된 트랜잭션은 [https://minaexplorer.com/broadcast-ledger](https://minaexplorer.com/broadcast-ledger) 를 사용하시면 됩니다.

## 연결된 노드 사용

나머지 섹션에서 시스템에 미나 클라이언트가 설치되어 있다고 가정하며, 미나가 설치되어 있지 않은 경우 <DocLink copy="시작하기" url="/using-mina/getting-started" />를 참조하시기 바랍니다.

## 계정 가져오기

노드가 동기화되면 트랜잭션에 서명하고 지불을 받을 주소를 생성할 수 있도록 공개/개인키 쌍을 가져와야 합니다. 보안상의 이유로 공격자가 접근하기 어려운 디렉토리에 키를 배치하려고 합니다.

아래의 명령을 실행하여 <DocLink copy="이전에 생성된" url="/using-mina/keypair" /> 키 쌍 파일을 가져옵니다.

    mina accounts import -privkey-path ~/keys/my-wallet

계정을 만들 때 입력했던 암호를 묻는 메시지가 표시될 것입니다.

<Alert kind="warning">

공개키는 누구와도 자유롭게 공유해도 되지만, 개인키 파일은 매우 조심해야 합니다. 개인키는 귀하의 자금에 대한 암호와 동일하므로 누구와도 공유하지 마시기 바랍니다.

</Alert>

해당 명령의 응답은 다음과 같습니다.

    😄 Imported account!
    Public key: B62qjaA4N9843FKM5FZk1HmeuDiojG42cbCDyZeUDQVjycULte9PFkC

추가로, `mina accounts create` 명령을 통해 트랜잭션을 보내거나 받기위한 새로운 계정을 만들 수 있습니다.

공개키가 기억하기에 매우 길기때문에, 환경변수에 저장해보도록 합시다. 하단의 명령을 사용하되, `<당신의 공개키>` 부분만 이전 명령의 결과에서 나온 값으로 대체합니다.

    export MINA_PUBLIC_KEY=<당신의 공개키>

이제, `$MINA_PUBLIC_KEY` 를 사용하여 공개키를 사용할 수 있습니다. (`echo $MINA_PUBLIC_KEY` 를 통해 제대로 저장되었는지 확인해보세요)

이 환경변수는 지금 사용중인 쉘의 세션에서만 유지됩니다. 혹시 영구적으로 사용하고 싶다면, `~/.profile` 이나 `~/.bash_profile` 파일에 해당 내용을 추가하면 됩니다.

<Alert>

혹시 당신이 노드를 클라우드 가상 머신을 통해 실행중이라면, 키를 외부에도 저장해놓으시기 바랍니다. 아래의 명령들을 사용하면 됩니다.

    mina accounts export -public-key <PUBLIC-KEY> -privkey-path <EXPORT-PATH>

[scp](https://linux.die.net/man/1/scp) 등을 사용해서 당신이 현재 사용중인 로컬 컴퓨터로 저장합니다.

    scp <EXPORT-PATH> <LOCAL-DESTINATION>

이후에, 새로운 VM 에서 노드를 실행할때 키를 다시 업로드 해서 임포트 하면 됩니다.

    mina accounts import -privkey-path <PRIVATE-KEY-FILE>

</Alert>

혹시 생성한 키 쌍들을 잊어버린경우, 아래의 명령을 통해 생성된 키 쌍을 모두 볼 수 있습니다.

    mina accounts list

## 계정의 잔고 확인하기

아래의 명령으로 가지고있는 모든 계정의 잔고를 확인할 수 있습니다.

    mina accounts list

아마 `Balance: 0 mina` 라고 나올 수도 있습니다. 네트워크 상태에 따라 트랜잭션이 완료되기까지 몇 블록이 걸릴 수 있습니다.

<Alert>

팁: `mina client status` 명령을 통해 현재 블록 높이 업데이트를 확인 할 수 있습니다.

</Alert>

## 지불 생성

드디어 여기까지 왔습니다. 첫번째 트랜잭션을 보내봅시다! 우선 지불을 보내기 전에, 계정의 잠금을 아래의 명령으로 해제해야 합니다.

    mina accounts unlock -public-key $MINA_PUBLIC_KEY

테스트 목적으로, 받는이와 보낸이를 모두 당신의 공개키로 지정할 것입니다. 이것은 트랜잭션을 자기자신한테 보내는것을 의미합니다. 당신의 공개키는 아래의 명령으로 확인 할 수 있습니다.

```
echo $MINA_PUBLIC_KEY
```

<Alert kind="warning">

혹시 받을 계정에 거래내역이 없는 경우, 계정 생성을 위한 수수료 `1 MINA` 가 필요하고, 트랜잭션 수량에서 차감될 것입니다.

</Alert>

거래가 어떻게 되는지 확인하기 위해 본인에게 미나를 보내봅시다!

    mina client send-payment \
      -amount 1.5 \
      -receiver $MINA_PUBLIC_KEY \
      -fee 0.1 \
      -sender $MINA_PUBLIC_KEY

위 명령이 무엇을 의미하는지 궁금하다면,

- `amount` 는 계정 생성 수수료를 충당하기에 충분한 `1.5` 미나를 테스트 값으로 전송합니다.
- `receiver` 는 트랜잭션을 수신할 계정의 공개키 입니다. 예. `B62qjaA4N9843FKM5FZk...`
- `fee` 는 0.1 미나를 수수료로 사용합니다.
- `sender` 는 트랜잭션을 보낼 계정의 공개키 입니다. 예. `B62qjaA4N9843FKM5FZk...`

만약 명령을 적절하게 입력했다면, 아래의 응답과 유사한 결과를 볼 수 있을겁니다.

    Dispatched payment with ID 3XCgvAHLAqz9VVbU7an7f2L5ffJtZoFega7jZpVJrPCYA4j5HEmUAx51BCeMc232eBWVz6q9t62Kp2cNvQZoNCSGqJ1rrJpXFqMN6NQe7x987sAC2Sd6wu9Vbs9xSr8g1AkjJoB65v3suPsaCcvvCjyUvUs8c3eVRucH4doa2onGj41pjxT53y5ZkmGaPmPnpWzdJt4YJBnDRW1GcJeyqj61GKWcvvrV6KcGD25VEeHQBfhGppZc7ewVwi3vcUQR7QFFs15bMwA4oZDEfzSbnr1ECoiZGy61m5LX7afwFaviyUwjphtrzoPbQ2QAZ2w2ypnVUrcJ9oUT4y4dvDJ5vkUDazRdGxjAA6Cz86bJqqgfMHdMFqpkmLxCdLbj2Nq3Ar2VpPVvfn2kdKoxwmAGqWCiVhqYbTvHkyZSc4n3siGTEpTGAK9usPnBnqLi53Z2bPPaJ3PuZTMgmdZYrRv4UPxztRtmyBz2HdQSnH8vbxurLkyxK6yEwS23JSZWToccM83sx2hAAABNynBVuxagL8aNZF99k3LKX6E581uSVSw5DAJ2S198DvZHXD53QvjcDGpvB9jYUpofkk1aPvtW7QZkcofBYruePM7kCHjKvbDXSw2CV5brHVv5ZBV9DuUcuFHfcYAA2TVuDtFeNLBjxDumiBASgaLvcdzGiFvSqqnzmS9MBXxYybQcmmz1WuKZHjgqph99XVEapwTsYfZGi1T8ApahcWc5EX9
    Receipt chain hash is now A3gpLyBJGvcpMXny2DsHjvE5GaNFn2bbpLLQqTCHuY3Nd7sqy8vDbM6qHTwHt8tcfqqBkd36LuV4CC6hVH6YsmRqRp4Lzx77WnN9gnRX7ceeXdCQUVB7B2uMo3oCYxfdpU5Q2f2KzJQ46

계정의 첫번째 거래에서는 `Receipt chain hash` 가 표시되지 않을 수도 있는데, 다음번 트랜잭션에서는 `Receipt chain hash` 의 헤드가 표시될 것입니다.

## 스테이킹 & 스나킹

주소 생성, 미나 주고 받기등 기본적인 사항에 익숙해지면 미나 네트워크의 진정으로 고유한 부분인 <DocLink copy="합의에 참여하고 블록체인 압축에 기여하기" url="/using-mina/staking" /> 로 넘어갈 수 있습니다.
